FROM sickcodes/docker-osx:catalina

WORKDIR /app

COPY /app /app

#fix permission
RUN useradd -ms /bin/bash admin
RUN chown -R admin:admin /app
RUN chmod 755 /app
USER admin
#download homebrew installer
RUN curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh -o - > install.sh
#install homebrew
RUN /bin/bash install.sh

CMD npm run electron:build -- --macos dmg